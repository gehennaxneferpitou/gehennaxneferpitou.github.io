<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="assets/js/javascript.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        
        <style> /*permite dar color y características al body, ya que al usar Bootstrap es difícil editar el body de 
        manera óptima desde el CSS*/
            body {
                background: rgb(63,228,251);
                background: radial-gradient(circle, rgba(63,228,251,1) 0%, rgba(246,247,128,0.5886729691876751) 100%);
                margin-left: 1rem;
                margin-right: 1rem;
                margin-bottom: 1rem;
                margin-top: 1rem;
                }
        </style>
            
        <title>Encriptador de Texto</title> <!--titulo de la pagina, aparece en la pestaña del navegador-->
    </head>
    <body>
        <div class="logo"> <!--contenedor logo Alura-->
        <img src="assets/img/Logo.png"> <!--logo Alura -->
        </div>
        <h3 class="card-title">Encriptador de Texto</h3> <!--titulo-->
        <div class="row">
            <div class="col-sm-6">
                <div class="card">
                <div class="card-body"> <!--diseño en capas, para obtener dos cartas o recuadros con contenidos,diseño de columnas-->
                <div class="texto"> <!--contenedor area de texto-->
                    <textarea class="form-control" id="textArea" rows="3" placeholder="Ingrese el texto aquí"></textarea><!--area de ingreso de texto-->
                    </div>
                    <div class="alerta"> <!--contenedor alerta de texto-->
                        <p><span class="iconify" data-icon="el:exclamation-sign"></span>Solo letras minúsculas y sin acentos.</p><!--parrafo de texto con alerta sobre letras y acentos-->
                    </div>
                    <div class="botones"> <!--contenedor de botones-->
                    <button type="button" class="btn btn-primary btn-lg" id="btnEncriptar">Encriptar</button> <!--boton encriptar-->
                    <button type="button" class="btn btn-secondary btn-lg" id="btnDesencriptar">Desencriptar</button> <!--boton desencriptar-->
                    </div>
                </div>
            </div>
            </div>
            <div class="col-sm-6">
            <div class="card">
                <div class="card-body"> <!--diseño en capas, para obtener dos cartas o recuadros con contenidos,diseño de columnas-->
                <div class="texto2"> <!--contenedor text area 2-->
                    <textarea class="form-control" id="textArea2" rows="3" hidden></textarea><!--text area 2, donde se muestra el texto ya encriptado-->
                    </div>
                    <div class="imagen"> <!--contenedor imagen-->
                        <img id="imagen1" src="assets/img/buscar.png"> <!--imagen-->
                    </div>
                    <div class="aviso11"> <!--contenedor aviso 1-->
                    <a href="#textArea"><p id="aviso1">Ingrese el texto que desea encriptar o desencriptar.</p></a><!--parrafo de aviso 1 con #ref al text area 1 para que se posicione el mouse en ingresa texto-->
                    </div>
                    <div class="aviso22"><!--contenedor aviso 2-->
                        <p id="aviso2">¡Ningún mensaje fue encontrado!</p><!--parrafo aviso 2-->
                    </div>
                <div class="botones2"> <!--contenedor botones-->
                    <button type="button" class="btn btn-outline-primary btn-lg" id="btnCopiar" hidden>Copiar</button><!--boton copiar-->
                </div>
                </div>
            </div>
            </div>
        </div>
        <footer>Desarrollado por Gabriela Yanez, Alura Latam 2022.</footer> <!--footer con datos del estudiante/desarrollador-->

        <script>

            //elementos card1
            var botonEncriptar = document.getElementById("btnEncriptar");
            var botonDesencriptar = document.getElementById("btnDesencriptar");

            //elementos card2
            var img = document.getElementById("imagen1");//oculto para la segunda vista
            var avis1 = document.getElementById("aviso1");//oculto para primera vista
            var avis2 = document.getElementById("aviso2");//oculto para primera vista
            var botonCopiar = document.getElementById("btnCopiar");//oculto para primera vista    

            //función encriptado, selecciona cada caso de vocales y devuelve la llave de encriptado de cada vocal
            function encriptado(vocales) 
            {
                switch(vocales) 
                {
                case 'e': return 'enter';
                case 'i': return 'imes';
                case 'a': return 'ai';
                case 'o': return 'ober';
                case 'u': return 'ufat';
                default : return vocales;
                }
            }

            //función validar, encuentra los caractéres no permitidos en la cadena de texto
            function validar(cadenaTexto) {
              const caracterNoPermitido = /[^a-z ñ]/; //no se permiten caracteres distintos a a-z ñ y espacio
                return !caracterNoPermitido.test(cadenaTexto);
            }

            //función encriptar, permite validar el ingreso de texto solo y exclusivamente en minúscula y sin tildes
            function encriptar() 
            {
                var ingresaTexto = document.getElementById("textArea").value;//ingreso de texto a Encriptar
                var muestraResultado = document.getElementById("textArea2");//donde se muestra el Resultado del texto Encriptado

                if(ingresaTexto != "" && validar(ingresaTexto))//valida que el texto ingresado sea diferente a vacío y solo letras minusculas(función)
                {
                  var resultado = ""; //nueva cadena de texto inicializada en blanco

                    for (var j = 0; j <ingresaTexto.length; j++) 
                    {
                        var palabra = encriptado(ingresaTexto[j]);//se crea una nueva cadena ya encriptada
                        resultado += palabra;
                    }
                    img.hidden = true;  //se ocultan elementos de la vista anterior para mostrar el text area de salida y el botón copiar
                    avis1.hidden = true;
                    avis2.hidden = true;
                    botonCopiar.hidden = false;
                    muestraResultado.hidden = false;
                    muestraResultado.value = resultado; //se asocia el valor del text area 2 a la variable resultado, para que muestre el texto encriptado
                }
                else
                {
                    alert("El texto no puede estar vacío **SOLO SE PERMITEN LETRAS MINÚSCULAS Y SIN TILDES** ");//alerta para el usuario
                    avis1.hidden = false;
                    avis2.hidden = false; 
                    muestraResultado.hidden = true;
                }
            }

            //función desencriptar permite hacer el efecto inverso de encriptar, capturando las llaves y trasformandolas a vocal
            function desencriptar()
            {
                var ingresarTexto = document.getElementById("textArea").value;
                if(ingresarTexto!= "" && validar(ingresarTexto))//valida que el texto ingresado sea diferente a vacío y solo letras minusculas(función)
                {
                ingresarTexto = ingresarTexto.replaceAll("enter", "e");
                ingresarTexto = ingresarTexto.replaceAll("imes", "i");
                ingresarTexto = ingresarTexto.replaceAll("ai", "a");
                ingresarTexto = ingresarTexto.replaceAll("ober", "o");
                ingresarTexto = ingresarTexto.replaceAll("ufat", "u");
                img.hidden = true;
                avis1.hidden = true;
                avis2.hidden = true;
                document.getElementById("textArea2").value=ingresarTexto; //se le asigna al text area 2 la variable de ingresar texto, de esta forma se toma el texto ya encriptado anteriormente para desencriptarlo
                }
                else
                {
                alert("El texto no puede estar vacío **SOLO SE PERMITEN LETRAS MINÚSCULAS Y SIN TILDES** ");//alerta para el usuario
                avis1.hidden = false;
                avis2.hidden = false; 
                }
            }
            
            //permite tomar el texto del text area 2 para copiarlo al portapapeles y luego poder pegarlo y usarlo para volver a encriptar o desencriptar, etc.
            function copiar() 
            {
                var txtResult = document.getElementById("textArea2"); 
                txtResult.select();
                document.execCommand("copy");//funcion de JS que permite copiar el contenido
            }

            //botones con el método onclick de JS, con sus respectivas funciones
            botonEncriptar.onclick = encriptar; 
            botonDesencriptar.onclick = desencriptar;
            botonCopiar.onclick = copiar;

        </script>

        <script src="https://code.iconify.design/2/2.2.1/iconify.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    </body>
</html>